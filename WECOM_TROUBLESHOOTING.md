# 企业微信配置指南

## 🚨 AppID 无效错误解决方案

### 问题原因
"AppID 无效" 错误通常由以下原因导致：
1. 企业ID配置错误
2. 应用ID配置错误
3. 配置信息未正确加载

### 🔧 快速修复步骤

#### 1. 获取正确的配置信息

**企业ID (Corp ID)**：
- 登录 [企业微信管理后台](https://work.weixin.qq.com/)
- 点击「我的企业」→「企业信息」
- 找到「企业ID」
- 格式通常为：`ww` 开头 + 16位数字

**应用ID (Agent ID)**：
- 点击「应用管理」→「应用」→「自建应用」
- 找到您的应用
- 应用详情页中查看「应用ID」
- 格式通常为纯数字，如：`1000001`

**应用Secret (Corp Secret)**：
- 在应用详情页中
- 点击「凭证与基础信息」
- 查看「应用Secret」
- 长字符串，包含字母和数字

#### 2. 配置文件修改

打开项目中的 `wecom-config.js` 文件，修改以下配置：

```javascript
const WECHAT_WORK_CONFIG = {
  // 替换为您的企业ID
  corpId: 'ww1234567890123456', // 示例，请替换为真实的
  
  // 替换为您的应用ID  
  agentId: '1000001', // 示例，请替换为真实的
  
  // 替换为您的应用Secret
  corpSecret: 'abcd1234-efgh5678-ijkl9012-mnop3456', // 示例，请替换为真实的
};
```

#### 3. 验证配置

访问以下链接检查配置：
```
https://carol-huang00.github.io/seek-stars/?wecom=true
```

系统会显示配置状态：
- ✅ 绿色：配置正确
- ✗ 红色：需要配置

### 📋 完整配置清单

#### 企业微信后台检查清单
- [ ] 企业已认证（非试用版）
- [ ] 自建应用已创建
- [ ] 应用已发布（非草稿状态）
- [ ] 可信域名已配置
- [ ] 企业微信授权登录已开启

#### 配置文件检查清单
- [ ] `wecom-config.js` 文件存在
- [ ] 企业ID格式正确（ww开头）
- [ ] 应用ID为纯数字
- [ ] 应用Secret不为空
- [ ] 所有占位符已替换

### 🛠️ 常见错误排查

#### 错误1：AppID 无效
**症状**：页面提示 "AppID 无效"
**解决方案**：
1. 检查企业ID格式是否正确
2. 确认应用在企业微信中存在
3. 确保应用已发布

#### 错误2：Corp Secret 无效
**症状**：获取用户信息失败
**解决方案**：
1. 检查Secret是否复制完整
2. 确认没有多余空格
3. 重新生成Secret

#### 错误3：域名未验证
**症状**：网页授权失败
**解决方案**：
1. 检查可信域名配置
2. 确认域名主体一致
3. 使用已备案域名

### 🧪 测试方法

#### 1. 配置测试
```javascript
// 在浏览器控制台执行
console.log(window.WECHAT_WORK_CONFIG);
```

#### 2. 环境测试
```javascript
// 检查是否在企业微信环境
console.log(navigator.userAgent.toLowerCase().includes('wxwork'));
```

#### 3. 完整流程测试
1. 访问：`?wecom=true`
2. 查看配置检查页面
3. 确认所有配置项为绿色
4. 点击企业微信认证按钮

### 🔄 配置更新流程

1. **修改配置文件**
   ```bash
   # 编辑 wecom-config.js
   vim wecom-config.js
   ```

2. **测试配置**
   ```bash
   # 本地测试
   npm run dev
   ```

3. **部署更新**
   ```bash
   git add .
   git commit -m "更新企业微信配置"
   git push origin main
   ```

4. **验证部署**
   ```bash
   # 等待部署完成后访问
   https://carol-huang00.github.io/seek-stars/?wecom=true
   ```

### 💡 最佳实践

#### 安全建议
- 不要将Secret提交到代码仓库
- 定期轮换Secret
- 使用最小权限原则

#### 维护建议
- 定期检查配置状态
- 监控认证成功率
- 备份重要配置信息

### 📞 技术支持

如果以上方法仍无法解决问题：

1. **收集信息**：
   - 错误截图
   - 配置文件内容（隐藏Secret）
   - 企业微信应用状态

2. **检查日志**：
   ```javascript
   // 查看控制台错误
   console.log('配置检查:', window.WECHAT_WORK_CONFIG);
   ```

3. **重新配置**：
   - 删除现有配置
   - 重新创建企业微信应用
   - 生成新的Secret

---

**重要提醒**：配置完成后，记得删除或注释掉调试代码，避免敏感信息泄露。